<div class="min-h-screen bg-black">

  <!-- ================= MODALS ================= -->
  <div *ngIf="modal" class="fixed inset-0 bg-black/90 backdrop-blur flex items-center justify-center z-50 p-4"
       (click)="closeModal()">
    <div (click)="$event.stopPropagation()">

      <!-- Voter Code Modal -->
      <div *ngIf="modal === 'show-voter-code'"
           class="bg-gradient-to-br from-gray-900 to-black rounded-2xl p-10 max-w-md border-2 border-green-600">
        <div class="text-center">
          <div class="text-6xl mb-6">‚úÖ</div>
          <h3 class="text-3xl font-bold text-white mb-4">Your Voter Code</h3>
          <div class="bg-white/10 rounded-xl p-6 mb-6">
            <p class="text-sm text-gray-400 mb-2">Save this - you need it to login</p>
            <p class="text-4xl font-mono font-bold text-green-400 tracking-wider">
              {{ currentUser?.voterCode }}
            </p>
          </div>
          <p class="text-red-400 text-sm mb-6">‚ö†Ô∏è Write this down! Cannot recover later.</p>
          <button (click)="goToDashboard()"
                  class="px-8 py-4 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl text-lg">
            Continue to Dashboard
          </button>
        </div>
      </div>

      <!-- Not Registered -->
      <div *ngIf="modal === 'not-registered-login'"
           class="bg-gray-900 rounded-2xl p-8 max-w-md border-2 border-red-600">
        <div class="text-center">
          <div class="text-6xl mb-4">‚ùå</div>
          <h3 class="text-2xl font-bold text-white mb-2">Invalid Credentials</h3>
          <p class="text-gray-400 mb-6">Not found. Register first.</p>
          <button (click)="goToRegistration()"
                  class="px-8 py-3 bg-red-600 text-white font-bold rounded-lg">
            Register Now
          </button>
        </div>
      </div>

      <!-- Already Registered -->
      <div *ngIf="modal === 'already-registered'"
           class="bg-gray-900 rounded-2xl p-8 max-w-md border-2 border-red-600">
        <div class="text-center">
          <div class="text-6xl mb-4">‚ö†Ô∏è</div>
          <h3 class="text-2xl font-bold text-white mb-2">Already Registered</h3>
          <p class="text-gray-400 mb-6">This ID is already registered. Use login.</p>
          <button (click)="goToLanding()"
                  class="px-8 py-3 bg-red-600 text-white font-bold rounded-lg">
            Go to Login
          </button>
        </div>
      </div>

      <!-- Vote Confirm -->
      <div *ngIf="modal === 'vote-confirm'"
           class="bg-gray-900 rounded-2xl p-8 max-w-md border-2 border-green-600">
        <div class="text-center">
          <div class="text-6xl mb-4">üõ°Ô∏è</div>
          <h3 class="text-2xl font-bold text-white mb-4">Confirm Vote</h3>
          <div class="bg-white/5 rounded-lg p-4 mb-6">
            <p class="text-sm text-gray-400 mb-2">Voting for {{ getSeatName(votingFor) }}</p>
            <p class="text-xl font-bold text-white">
              {{ selectedCandidates[votingFor]?.name }}
            </p>
            <p class="text-sm text-gray-400">
              {{ selectedCandidates[votingFor]?.party }}
            </p>
          </div>
          <div class="flex gap-4">
            <button (click)="closeModal()"
                    class="flex-1 px-6 py-3 bg-gray-700 text-white font-bold rounded-lg">
              Cancel
            </button>
            <button (click)="confirmVote()"
                    class="flex-1 px-6 py-3 bg-green-600 text-white font-bold rounded-lg">
              Confirm
            </button>
          </div>
        </div>
      </div>

      <!-- Vote Success -->
      <div *ngIf="modal === 'vote-success'"
           class="bg-gray-900 rounded-2xl p-8 max-w-md border-2 border-green-600">
        <div class="text-center">
          <div class="text-6xl mb-4">‚úÖ</div>
          <h3 class="text-2xl font-bold text-white mb-2">Vote Recorded!</h3>
          <p class="text-gray-400 mb-4">Continue voting for other positions</p>
          <button (click)="closeModal()"
                  class="px-8 py-3 bg-green-600 text-white font-bold rounded-lg">
            Continue
          </button>
        </div>
      </div>

    </div>
  </div>

  <!-- ================= NAVIGATION ================= -->
  <div *ngIf="page !== 'landing' && currentUser"
       class="bg-gradient-to-r from-black via-gray-900 to-black border-b border-red-600 sticky top-0 z-40">
    <div class="container mx-auto px-8 py-4 flex justify-between items-center">
      <div class="flex gap-4">
        <button (click)="page='dashboard'"
                [class]="page==='dashboard'
                ? 'px-8 py-3 rounded-xl font-semibold bg-gradient-to-r from-red-600 to-green-600 text-white'
                : 'px-8 py-3 rounded-xl bg-gray-800 text-gray-300'">
          Dashboard
        </button>
        <button (click)="page='voting'"
                [class]="page==='voting'
                ? 'px-8 py-3 rounded-xl font-semibold bg-gradient-to-r from-red-600 to-green-600 text-white'
                : 'px-8 py-3 rounded-xl bg-gray-800 text-gray-300'">
          Vote
        </button>
        <button (click)="page='admin'"
                [class]="page==='admin'
                ? 'px-8 py-3 rounded-xl font-semibold bg-gradient-to-r from-red-600 to-green-600 text-white'
                : 'px-8 py-3 rounded-xl bg-gray-800 text-gray-300'">
          Results
        </button>
      </div>
      <button (click)="logout()" class="px-8 py-3 bg-red-600 text-white rounded-xl">
        Logout
      </button>
    </div>
  </div>

  <!-- ================= LANDING ================= -->
  <div *ngIf="page==='landing'"
       class="min-h-screen bg-gradient-to-br from-black via-red-900 to-green-900 flex items-center justify-center p-6">
    <div class="max-w-5xl w-full text-center">
      <div class="text-9xl mb-8">üõ°Ô∏è</div>
      <h1 class="text-7xl font-bold text-white mb-4">Uchaguzi wa Taifa</h1>
      <p class="text-3xl text-gray-300 mb-16">National Voting Portal</p>

      <div class="grid md:grid-cols-2 gap-8">
        <!-- Login -->
        <div class="bg-gray-900 p-10 rounded-3xl border-2 border-green-600">
          <h2 class="text-3xl font-bold text-white mb-6">Login</h2>
          <input [(ngModel)]="loginForm.voterCode"
                 class="w-full mb-4 px-5 py-4 bg-white/5 text-white rounded-lg"
                 placeholder="Voter Code" />
          <input [(ngModel)]="loginForm.idNumber"
                 (input)="filterIdNumber($event)"
                 maxlength="8"
                 class="w-full mb-6 px-5 py-4 bg-white/5 text-white rounded-lg"
                 placeholder="ID Number" />
          <button (click)="login()"
                  class="w-full py-4 bg-green-600 text-white font-bold rounded-lg">
            Login
          </button>
        </div>

        <!-- Register -->
        <div class="bg-gray-900 p-10 rounded-3xl border-2 border-red-600">
          <h2 class="text-3xl font-bold text-white mb-6">Register</h2>
          <button (click)="page='registration'"
                  class="w-full py-4 bg-red-600 text-white font-bold rounded-lg">
            Register Now
          </button>
        </div>
      </div>
    </div>
  </div>

</div>
